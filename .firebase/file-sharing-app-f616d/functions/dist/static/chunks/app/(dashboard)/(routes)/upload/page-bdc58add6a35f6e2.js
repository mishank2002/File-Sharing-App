(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[500],{2568:function(e,t,l){Promise.resolve().then(l.bind(l,2578))},7001:function(e,t,l){"use strict";l.d(t,{l:function(){return s}});var r=l(6142);l(3493);let s=(0,r.ZF)({apiKey:"AIzaSyBUy3ZSYcTJNRiwMPhhqDtOcFtAzXOGHow",authDomain:"file-sharing-app-f616d.firebaseapp.com",projectId:"file-sharing-app-f616d",storageBucket:"file-sharing-app-f616d.appspot.com",messagingSenderId:"942294062692",appId:"1:942294062692:web:49527fe831cfa42fb5b171",measurementId:"G-35KFM0WH03"})},2578:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return y}});var r=l(7437),s=l(2265),i=l(2985),a=function(e){let{msg:t}=e;return(0,r.jsxs)("div",{className:"p-4 bg-red-500 mt-5 text-white rounded-md flex gap-5 items-center ",children:[(0,r.jsx)(i.Z,{}),t]})},n=l(2235),o=l(703),d=function(e){let t=e.file.type?e.file.type.split("/")[1]:null;return(0,r.jsxs)("div",{className:"flex items-center gap-2 justify-between mt-5 border rounded-md p-2 border-blue-200",children:[(0,r.jsxs)("div",{className:"flex items-center ",children:[(0,r.jsx)(o.default,{src:"/file.png",width:50,height:50,alt:"Nothing"}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("h2",{children:e.file.name}),(0,r.jsxs)("h2",{className:"text-[12px] text-gray-400",children:[t," / ",(e.file.size/1024/1024).toFixed(2),"MB"]})]})]}),(0,r.jsx)(n.Z,{className:"text-red-500 cursor-pointer",onClick:e.removeFile})]})},c=function(e){let{progress:t=40}=e;return(0,r.jsx)("div",{className:"bg-gray-400 w-full mt-3 h-4 rounded-full",children:(0,r.jsx)("div",{className:" bg-primary py-0.2 h-4 rounded-full text-[10px] text-white",style:{width:"".concat(t,"%")},children:"".concat(Number(t).toFixed(0),"%")})})},u=function(e){let{uploadBtnClick:t,progress:l}=e,[i,n]=(0,s.useState)(),[o,u]=(0,s.useState)(),h=e=>{if(e&&e.size>2e6){console.log("Size if Greater Than 2MB"),u("Max limit of 2MB exceeded");return}u(null),n(e)};return(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,r.jsxs)("label",{htmlFor:"dropzone-file",className:"flex flex-col items-center justify-center w-full h-64 border-2 border-blue-300 border-dashed rounded-lg cursor-pointer bg-blue-50 light:hover:bg-bray-800 light:bg-gray-700 hover:bg-gray-100 light:border-gray-600 light:hover:border-gray-500 light:hover:bg-gray-600",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,r.jsx)("svg",{className:"w-12 h-12 mb-4 text-blue-500 light:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 16",children:(0,r.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"})}),(0,r.jsxs)("p",{className:"mb-2 text-lg md:text-2xl text-gray-500 light:text-gray-400",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Click to upload"})," or ",(0,r.jsx)("strong",{className:"text-primary",children:"drag"}),"  and ",(0,r.jsx)("strong",{className:"text-primary",children:"drop"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 light:text-gray-400",children:"SVG, PNG, JPG or GIF (MAX. Size 2MB)"})]}),(0,r.jsx)("input",{id:"dropzone-file",type:"file",className:"hidden",onChange:e=>h(e.target.files[0])})]})}),o&&(0,r.jsx)(a,{msg:o}),i&&(0,r.jsx)(d,{file:i,removeFile:()=>n(null)}),l>0?(0,r.jsx)(c,{progress:l}):(0,r.jsx)("button",{disabled:!i,className:"p-2 bg-primary text-white width-[30%] rounded-full mt-5 disabled:bg-gray-400",onClick:()=>t(i),children:"Upload"}),100===l&&(0,r.jsx)("div",{children:"File Uploaded Successfully"})]})},h=l(4905),m=l(7001),p=l(8121),x=l(5782);let f=()=>{let e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=t.length;for(let r=0;r<4;r++)e+=t.charAt(Math.floor(Math.random()*l));return e};var g=l(7907),y=function(){let{user:e}=(0,x.aF)(),[t,l]=(0,s.useState)(0),[i,a]=(0,s.useState)(!1),n=(0,h.cF)(m.l),o=(0,p.ad)(m.l),d=(0,g.useRouter)(),[c,y]=(0,s.useState)(),b=e=>{let t={contentType:e.type},r=(0,h.iH)(n,"file-upload/"+(null==e?void 0:e.name)),s=(0,h.B0)(r,e,t);new Promise((e,t)=>{s.on("state_changed",e=>{let t=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+t+"% done"),l(t)},e=>{t(e)},()=>{a(!0),(0,h.Jt)(s.snapshot.ref).then(t=>{console.log("File available at",t),e(t)})})}).then(t=>{j(e,t)}).catch(e=>{console.error("Error uploading file:",e)})},j=async(t,l)=>{let r=f().toString();try{await (0,p.pl)((0,p.JU)(o,"uploadedFile",r),{fileName:null==t?void 0:t.name,fileSize:null==t?void 0:t.size,fileType:null==t?void 0:t.type,fileUrl:l,userEmail:null==e?void 0:e.primaryEmailAddress.emailAddress,userName:null==e?void 0:e.fullName,password:"",id:r,shortUrl:"http://localhost:3000/"+r}),y(r)}catch(e){console.error("Error saving file information:",e)}};return(0,s.useEffect)(()=>{c&&setTimeout(()=>{d.push("/file-preview/".concat(c))},1e3)},[c,d]),(0,r.jsxs)("div",{className:"p-5 px-8 md:px-28",children:[(0,r.jsxs)("h2",{className:"text-[20px] text-center m-5",children:["Start ",(0,r.jsx)("strong",{className:"text-primary",children:"Uploading"})," Files And ",(0,r.jsx)("strong",{className:"text-primary",children:"Share"})," It"]}),(0,r.jsx)(u,{uploadBtnClick:e=>b(e),progress:t,uploadComplete:i})]})}}},function(e){e.O(0,[358,782,749,103,930,971,69,744],function(){return e(e.s=2568)}),_N_E=e.O()}]);