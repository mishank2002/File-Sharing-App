(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[221],{9925:function(e,s,l){Promise.resolve().then(l.bind(l,1417))},7001:function(e,s,l){"use strict";l.d(s,{l:function(){return r}});var a=l(6142);l(3493);let r=(0,a.ZF)({apiKey:"AIzaSyBUy3ZSYcTJNRiwMPhhqDtOcFtAzXOGHow",authDomain:"file-sharing-app-f616d.firebaseapp.com",projectId:"file-sharing-app-f616d",storageBucket:"file-sharing-app-f616d.appspot.com",messagingSenderId:"942294062692",appId:"1:942294062692:web:49527fe831cfa42fb5b171",measurementId:"G-35KFM0WH03"})},1417:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return c}});var a=l(7437),r=l(2265),t=l(8121),n=l(7001),o=l(5782);let{default:d}=l(8251);var i=e=>{let{onPasswordSave:s,fileInfo:l,saveSuccess:t}=e,[n,i]=(0,r.useState)(!1),[c,u]=(0,r.useState)(""),[m,f]=(0,r.useState)(""),[p,h]=(0,r.useState)(!1),[g,x]=(0,r.useState)(""),{user:b}=(0,o.aF)(),v=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);return(0,a.jsx)("div",{className:"container mx-auto mt-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto flex",children:[(0,a.jsx)("div",{className:"w-1/2",children:(0,a.jsx)("div",{className:"bg-gray-100 border border-gray-300 rounded-md p-4",children:l&&l.fileUrl&&(0,a.jsx)("img",{src:l.fileUrl,alt:"Uploaded Image",className:"w-full max-w-lg mx-auto"})})}),(0,a.jsx)("div",{className:"w-1/2 px-4",children:(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,a.jsx)("span",{className:"text-gray-600 font-semibold",children:"Go to Upload"})}),(0,a.jsx)("input",{type:"text",value:l?l.shortUrl:"",readOnly:!0,className:"w-full px-3 py-2 mb-4 bg-gray-100 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Short URL"}),(0,a.jsxs)("label",{className:"inline-flex items-center mb-4",children:[(0,a.jsx)("input",{type:"checkbox",checked:n,onChange:e=>{i(e.target.checked),u((e.target.checked,""))},className:"form-checkbox h-5 w-5 text-blue-600"}),(0,a.jsx)("span",{className:"ml-2 text-gray-700",children:"Enable Password?"})]}),n&&(0,a.jsx)("input",{type:"password",value:c,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 mb-4 bg-gray-100 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Password"}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("button",{onClick:()=>s(c),className:"w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Save"}),t&&(0,a.jsx)("div",{className:"mt-2 text-green-600",children:"Password saved successfully!"})]}),(0,a.jsxs)("div",{className:"flex items-center mt-4",children:[(0,a.jsx)("input",{type:"email",value:m,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 mr-2 bg-gray-100 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Send File to Email"}),(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:()=>{var e;if(!v(m)){x("Please enter a valid email address"),h(!1);return}(console.log("Data to be sent:",e={emailToSend:m,userName:null==b?void 0:b.fullName,fileName:null==l?void 0:l.fileName,fileSize:null==l?void 0:l.fileSize,fileType:null==l?void 0:l.fileType,shortUrl:null==l?void 0:l.shortUrl,password:c}),d.post("/api/send",e).then(e=>(console.log("Email sent successfully:",e.data),e.data)).catch(e=>{throw console.error("Error sending email:",e),e})).then(e=>{console.log(e),console.log("Hi Data:"),h(!0),x("")}).catch(e=>{console.error("Error sending email:",e),e.response&&e.response.data&&e.response.data.error?x(e.response.data.error.message):x("Error sending email. Please try again later."),h(!1)})},children:"Send Email"})]}),g&&(0,a.jsx)("div",{className:"mt-2 text-red-600",children:g}),p&&(0,a.jsx)("div",{className:"mt-2 text-green-600",children:"Email sent successfully!"})]})})]})})},c=function(e){let{params:s}=e,l=(0,t.ad)(n.l),[o,d]=(0,r.useState)(null),[c,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=async()=>{try{let e=(0,t.JU)(l,"uploadedFile",null==s?void 0:s.fileId),a=await (0,t.QT)(e);if(a.exists()){let e=a.data();d(e)}else console.log("No such document!")}catch(e){console.error("Error fetching document:",e)}};console.log(null==s?void 0:s.fileId),(null==s?void 0:s.fileId)&&e()},[l,null==s?void 0:s.fileId]);let m=async e=>{let a=(0,t.JU)(l,"uploadedFile",null==s?void 0:s.fileId);await (0,t.r7)(a,{password:e}),u(!0);let r=await (0,t.QT)(a);r.exists()&&d(r.data())};return(0,a.jsx)("div",{children:(0,a.jsx)(i,{fileInfo:o,saveSuccess:c,onPasswordSave:m})})}}},function(e){e.O(0,[358,782,103,251,971,69,744],function(){return e(e.s=9925)}),_N_E=e.O()}]);